## 관계 대수와 SQL

관계 데이터 모델에서 두가지 정형적인 언어

- 관계 해석(relational calculaus) →what에 대한 것만 명세
- 관계 대수(relational algebra) → what + how 둘 다 표현 가능, 좀 더 고차원

### 4.1 관계 대수

대수 → 수와 수의 사칙연산

연산자 - 피연산자(relation)

이때 관계 연산자가 1개일수도 2개일수도 있다.

집합 연산자를 다 쓸 수 있다 (합집합, 차집합)

관계 연산자 → 셀렉션, 프로젝션, 여러 조인 등

- 셀렉션 - 조건을 만족하는 튜플들을 고르는 것
    - 셀렉션 조건을 프레디키트(predicate)라고 함, 술어, true/false를 만족하는 식

- 프로젝션 - 칼럼들을 고르는 것
    - 중복을 허용함 why? 너무 시간이 오래 걸리기 때문에. 따라서 중복을 제거하라는 명령어가 없으면 중복 허용된 칼럼들 존재
        - 중복을 허용하는 집합 - bag theory
        - 중복을 허용하지 않는 - set theory

- 집합 연산자 - 합집합, 교집합, 차집합
    - 합집합 호환 - union compatible이어야 함, attribute 수가 같고, 도메인이 같아야 함
    - 합집합 연산자 - R 또는 S에 있거나 R과 S 모두에 속한 튜플, 중복된 결과 제거됨
    - 교집합 연산자 - R과 S 모두에 속한 튜플 값
    - 차집합 연산자 - R - S 경우 R에만 속하는 값들만
    
- 카티션 곱 연산자 - 임의의 두 릴레이션을 연산 가능, R과 S의 튜플들의 모든 가능한 조합

관계 대수의 완전성 relationally complete

필수 연산자 5개(셀렉션, 프로젝션, 합집합, 차집합, 카티션 곱)를 표현할 수 있어야 한다. 

expressive power

- 조인 연산자 - 두 릴레이션을 결합
    - 세타조인 - =, <>, <=, >=, > 중 하나
    - 동등조인 - 세타 조인 중 비교 연산자가 =인 조인
    - 자연조인 - 동등 조인 결과 릴레이션에서 조인 애트리뷰트 제거
    - 외부조인 - 왼쪽 외부 조인, 오른쪽 외부 조인, 완전 외부 조인
    - 세미조인
- 디비전 연산자 - S의 값을 가지고 있는 R 값들만 가져옴

관계 대수의 한계

- 산술 연산 불가능
- 집단 함수(aggregate function) 지원 X (통계 연산 X)
- 정렬 나타낼 수 없음
- 테이터베이스 수정 불가능
- 프로젝션 연산의 결과에 중복된 튜플을 나타내는 것이 필요할 때 명시 불가능

⇒ 집단 함수(AVG), 그룹화(g) 등 관계 대수 연산자 추가됨
