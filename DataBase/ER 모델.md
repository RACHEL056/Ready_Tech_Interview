### ER 모델

- P.P Chen이 제안
- 현재는 EER(Enhanced ER) 모델 사용
- 쉽게 관계 데이터 모델로 사상됨

- 엔티티(Entity) - 독립적으로 존재하면서 고유하게 식별 가능한 객체
    - ER 다이어그램에서 사각형 형태
    
    - 엔티티 타입- 동일한 애트리뷰트들(레코드)를 갖는 엔티티 틀
    - 엔티티 집합 - 동일한 애트리뷰트들의 모임, 인스턴스들
    - 강한 엔티티 타입 → 일반적인 엔티티(독립적으로 존재)
    - 약한 엔티티 타입 → 독립적으로 존재하지 못하고 다른 엔티티의 키를 가지고 있어야 식별 가능
        
        소유 엔티티 타입(owner entity) or 식별 엔티티 타입(identifying entity)
        
        이중선 직사각형으로 표기
        
        부분키는 점선 밑줄을 그어 표시 
        
    
- 애트리뷰트(Entribute) - 연관된 애트리뷰트의 집합이 엔티티가 된다
    - ER 다이어그램에서 타원형 형태
    - 독립적인 의미를 갖지 못한다
    
    - 단순 애트리뷰트(simple attribute) - 더 이상 다른 애트리뷰트로 나눌 수 없음
    - 복합 애트리뷰트(composite attribute) - 두 개 이상의 애트리뷰트로 이루어짐
    - 단일 값 애트리뷰트(single-valued attribute) - 각 엔티티마다 하나의 값만 가짐
    - 다치 애트리뷰트(multi-valued) - 각 엔티티마다 여러개의 값 가짐(이중선 타원)
    - 저장된 애트리뷰트(stored) - 다른 애트리뷰트와 독립적으로 존재
    - 유도된 애트리뷰트(derived) - 다른 애트리뷰트의 값으로 얻어진 존재(점선 타원)

- 관계(Relation) - 두 엔티티들 사이를 연결하는 것(매핑)
    - 주로 동사로 표현되는 것들
    - 다이아몬드/마름모 형태로 표현
    - 관계의 애트리뷰트 → 특징을 기술하는 애트리뷰트를 가질 수 있음, 키 애트리뷰트X
    - 차수(degree) - 실제 관계로 연결된 엔티티 타입의 개수
    - 카디날리티(Cardinality) - 한 엔티티가 참여할 수 있는 관계의 수 ex) 1:1, 1:N, N:M
    - 카디날리티 비율의 최소값과 최대값 → option이냐 mandatory냐?
        
        min은 적어도 max는 최대 참여를 나타냄
        
        min = 0 → 엔티티가 반드시 관계를 참여해야 할 필요 없음
        
        max = * → 엔티티가 임의의 수만큼 참여할 수 있음
        
    - 역할(role) - 관계 타입의 의미를 명확하게 하기 위해 사용
        - 관계 타입 간선 위에 표시
    - 전체 참여와 부분 참여 - 모든 엔티티가 필수적으로 참여해야 하는가 or 자율적으로 참여
        - 약한 엔티티 타입은 항상 관계에 참여
        - 전체 참여는 ER 다이어그램에서 이중실선 표시
        
- ER의 다른 표현법 - 새발(crow-feet) 표기법
    - O : 0을 의미
    - |  : 1을 의미
    - 새발 모양 : 이상을 의미
    
- ER 스키마를 관계 모델의 릴레이션으로: 개념적 스키마 → 논리적 스키마
    1. 정규 엔티티 타입과 단일 값 애트리뷰트
    2. 약한 엔티티 타입과 단일 값 애트리뷰트
    3. 2진 1:1 관계 타입
    
    ⇒ 논리적 설계
    

**논리적 설계**

단계 1: 정규 엔티티 타입과 단일 값 애트리뷰트 

정규 엔티티 타입 E에 대해 하나의 릴레이션 R을 생성한 후, E에 있던 단순 애트리뷰트들을 릴레이션 R에 모두 포함시킴
이때 복합 애트리뷰트는 그 복합 애트리뷰트를 구성하는 단순 애트리뷰트들만 포함시킴

⇒ 어떤 애트리뷰트들이 복합 애트리뷰트에 속하는지를 알 수 없음

단계 2: 약한 엔티티 타입과 단일 값 애트리뷰트

*약한 엔티티는 키 값이 없어서 자신이 속한 강엔티티의 기본키를 키값으로 함

약한 엔티티 타입 W에 대해 릴레이션 R을 생성한 후, 단순 애트리뷰트들을 릴레이션에 포함시킴
이때 소유 엔티티 타입에 해당하는 릴레이션의 기본 키를 외래 키로 포함

단계 3: 2진 1:1 관계 타입

둘 중 하나의 릴레이션의 기본키를 다른 릴레이션의 외래 키로 포함시킴

단계 4: 정규 2진 1:N 관계 타입

N측의 릴레이션 S에 1측의 릴레이션 기본키를 외래 키로 포함시킴

단계 5: 2진 M:N 관계 타입

별도의 릴레이션을 만들어 기본키를 애트리뷰트로 가짐

단계 6: 3진 이상의 관계 타입

별도의 릴레이션을 만들기(기본키를 외래 키로 가지고 단일 애트리뷰트를 포함)

단계 7: 다치 애트리뷰트

각 다치 애트리뷰트에 대해 릴레이션 R 생성(다치 애트리뷰트와 외래키 구성)
